defmodule RandexTest do
  use ExUnit.Case
  doctest Randex

  @cases [
    "(?P<foo_123>a)",
    "(?P<foo_123>a)(?P=foo_123)",
    "[\\1]",
    "\\09",
    "\\141",
    "(a)(b)(c)(d)(e)(f)(g)(h)(i)(j)(k)(l)\\119",
    "\\0",
    "[\\0a]",
    "[a\\0]",
    "[^a\\0]",
    "\\a[\\b]\\f\\n\\r\\t\\v",
    "[\\a][\\b][\\f][\\n][\\r][\\t][\\v]",
    "\\xff",
    "\\x00ffffffffffffff",
    "\\x00f",
    "\\x00fe",
    "^\\w+=(\\\\[\\000-\\277]|[^\\n\\\\])*",
    "a.b",
    "a.b",
    "a.*b",
    "a.{,5}b",
    "a.b",
    "a.b(?s)",
    "a.*(?s)b",
    "(?s)a.{,5}b",
    "(?s)a.b",
    "",
    "abc",
    "abc",
    "abc",
    "abc",
    "abc",
    "abc",
    "ab*c",
    "ab*bc",
    "ab*bc",
    "ab*bc",
    "ab+bc",
    "ab+bc",
    "ab+bc",
    "ab+bc",
    "ab?bc",
    "ab?bc",
    "ab?bc",
    "ab?c",
    "^abc$",
    "^abc$",
    "^abc",
    "^abc$",
    "abc$",
    "^",
    "$",
    "a.c",
    "a.c",
    "a.*c",
    "a.*c",
    "a[bc]d",
    "a[bc]d",
    "a[b-d]e",
    "a[b-d]e",
    "a[b-d]",
    "a[-b]",
    "a[\\-b]",
    "a]",
    "a[]]b",
    "a[\\]]b",
    "a[^bc]d",
    "a[^bc]d",
    "a[^-b]c",
    "a[^-b]c",
    "a[^]b]c",
    "a[^]b]c",
    "\\ba\\b",
    "\\ba\\b",
    "\\ba\\b",
    "\\by\\b",
    "\\by\\b",
    "\\by\\b",
    "x\\b",
    "x\\B",
    "\\Bz",
    "z\\B",
    "\\Bx",
    "\\Ba\\B",
    "\\Ba\\B",
    "\\Ba\\B",
    "\\By\\B",
    "\\By\\B",
    "\\By\\b",
    "\\by\\B",
    "\\By\\B",
    "ab|cd",
    "ab|cd",
    "()ef",
    "$b",
    "a\\(b",
    "a\\(*b",
    "a\\(*b",
    "a\\\\b",
    "((a))",
    "(a)b(c)",
    "a+b+c",
    "(a+|b)*",
    "(a+|b)+",
    "(a+|b)?",
    "[^ab]*",
    "abc",
    "a*",
    "a|b|c|d|e",
    "(a|b|c|d|e)f",
    "abcd*efg",
    "ab*",
    "ab*",
    "(ab|cd)e",
    "[abhgefdc]ij",
    "^(ab|cd)e",
    "(abc|)ef",
    "(a|b)c*d",
    "(ab|ab*)bc",
    "a([bc]*)c*",
    "a([bc]*)(c*d)",
    "a([bc]+)(c*d)",
    "a([bc]*)(c+d)",
    "a[bcd]*dcdcde",
    "a[bcd]+dcdcde",
    "(ab|a)b*c",
    "((a)(b)c)(d)",
    "[a-zA-Z_][a-zA-Z0-9_]*",
    "^a(bc+|b[eh])g|.h$",
    "(bc+d$|ef*g.|h?i(j|k))",
    "(bc+d$|ef*g.|h?i(j|k))",
    "(bc+d$|ef*g.|h?i(j|k))",
    "(bc+d$|ef*g.|h?i(j|k))",
    "(bc+d$|ef*g.|h?i(j|k))",
    "(((((((((a)))))))))",
    "multiple words of text",
    "multiple words",
    "(.*)c(.*)",
    "[k]",
    "a[-]?c",
    "(abc)\\1",
    "([a-c]*)\\1",
    "^(.+)?B",
    "(a+).\\1$",
    "^(a+).\\1$",
    "(abc)\\1",
    "([a-c]+)\\1",
    "(a)\\1",
    "(a+)\\1",
    "(a+)+\\1",
    "(a).+\\1",
    "(a)ba*\\1",
    "(aa|a)a\\1$",
    "(a|aa)a\\1$",
    "(a+)a\\1$",
    "([abc]*)\\1",
    "(a)(b)c|ab",
    "(a)+x",
    "([ac])+x",
    "([^/]*/)*sub1/",
    "([^.]*)\\.([^:]*):[T ]+(.*)",
    "([^N]*N)+",
    "([^N]*N)+",
    "([abc]*)x",
    "([abc]*)x",
    "([xyz]*)x",
    "(a)+b|aac",
    "(?P<id>aaa)a",
    "(?P<id>aa)(?P=id)",
    "\\09",
    "\\141",
    "(a)(b)(c)(d)(e)(f)(g)(h)(i)(j)(k)(l)\\119",
    "abc",
    "abc",
    "abc",
    "abc",
    "abc",
    "abc",
    "ab*c",
    "ab*bc",
    "ab*bc",
    "ab*bc",
    "ab{,}bc",
    "ab+bc",
    "ab+bc",
    "ab+bc",
    "ab{,}bc",
    "ab+bc",
    "ab{,}bc",
    "ab{,3}bc",
    "ab{\"\",4}bc",
    "ab{\",5}bc",
    "ab?bc",
    "ab?bc",
    "ab{,1}bc",
    "ab?bc",
    "ab?c",
    "ab{,1}c",
    "^abc$",
    "^abc$",
    "^abc",
    "^abc$",
    "abc$",
    "^",
    "$",
    "a.c",
    "a.c",
    "a.*c",
    "a.*c",
    "a[bc]d",
    "a[bc]d",
    "a[b-d]e",
    "a[b-d]e",
    "a[b-d]",
    "a[-b]",
    "a[b-]",
    "a]",
    "a[]]b",
    "a[^bc]d",
    "a[^bc]d",
    "a[^-b]c",
    "a[^-b]c",
    "a[^]b]c",
    "a[^]b]c",
    "ab|cd",
    "ab|cd",
    "()ef",
    "$b",
    "a\\(b",
    "a\\(*b",
    "a\\(*b",
    "a\\\\b",
    "((a))",
    "(a)b(c)",
    "a+b+c",
    "a{,}{1,}c",
    "a.+?c",
    "(a+b)*",
    "(a+|b){,}",
    "(a+|b)+",
    "(a+|){,}",
    "(a+|b)?",
    "(a+|b){,1}",
    "()\" 2],\"    [\"[^ab]*",
    "abc",
    "a*",
    "([abc])*d",
    "([abc])*bcd",
    "a|b|c|d|e",
    "(a|b|c|d|e)f",
    "abcd*efg",
    "ab*",
    "ab*",
    "(ab|cd)e",
    "[abhgefdc]ij",
    "^(ab|cd)e",
    "(abc|)ef",
    "(a|b)c*d",
    "(ab|ab*)bc",
    "a([bc]*)c*",
    "a([bc]*)(c*d)",
    "a([bc]+)(c*d)",
    "a([bc]*)(c+d)",
    "a[bcd]*dcdcde",
    "a[bcd]+dcdcde",
    "(ab|a)b*c",
    "((a)(b)c)(d)",
    "[a-zA-Z_][a-zA-Z0-9_]*",
    "^a(bc+|b[eh])g|.h$",
    "(bc+d$|ef*g.|h?i(j|k))",
    "(bc+d$|ef*g.|h?i(j|k))",
    "(bc+d$|ef*g.|h?i(j|k))",
    "(bc+d$|ef*g.|h?i(j|k))",
    "(bc+d$|ef*g.|h?i(j|k))",
    "((((((((((a))))))))))",
    "((((((((((a))))))))))\\10",
    "(((((((((a)))))))))",
    "multiple words of text",
    "multiple words",
    "(.*)c(.*)",
    "\\((.*), (.*)\\)",
    "[k]",
    "a[-]?c",
    "(abc)\\1",
    "([a-c]*)\\1",
    "(?i)abc",
    "(?i)abc",
    "(?i)abc",
    "(?i)abc",
    "(?i)abc",
    "(?i)abc",
    "(?i)ab*c",
    "(?i)ab*bc",
    "(?i)ab*bc",
    "(?i)ab*?bc",
    "(?i)ab{0,}?bc",
    "(?i)ab+?bc",
    "(?i)ab+bc",
    "(?i)ab+bc",
    "(?i)ab{1,}bc",
    "(?i)ab+bc",
    "(?i)ab{1,}?bc",
    "(?i)ab{1,3}?bc",
    "(?i)ab{3,4}?bc",
    "(?i)ab{4,5}?bc",
    "(?i)ab??bc",
    "(?i)ab??bc",
    "(?i)ab{0,1}?bc",
    "(?i)ab??bc",
    "(?i)ab??c",
    "(?i)ab{0,1}?c",
    "(?i)^abc$",
    "(?i)^abc$",
    "(?i)^abc",
    "(?i)^abc$",
    "(?i)abc$",
    "(?i)^",
    "(?i)$",
    "(?i)a.c",
    "(?i)a.c",
    "(?i)a.*?c",
    "(?i)a.*c",
    "(?i)a[bc]d",
    "(?i)a[bc]d",
    "(?i)a[b-d]e",
    "(?i)a[b-d]e",
    "(?i)a[b-d]",
    "(?i)a[-b]",
    "(?i)a[b-]",
    "(?i)a]",
    "(?i)a[]]b",
    "(?i)a[^bc]d",
    "(?i)a[^bc]d",
    "(?i)a[^-b]c",
    "(?i)a[^-b]c",
    "(?i)a[^]b]c",
    "(?i)a[^]b]c",
    "(?i)ab|cd",
    "(?i)ab|cd",
    "(?i)()ef",
    "(?i)$b",
    "(?i)a\\(b",
    "(?i)a\\(*b",
    "(?i)a\\(*b",
    "(?i)a\\\\b",
    "(?i)((a))",
    "(?i)(a)b(c)",
    "(?i)a+b+c",
    "(?i)a{1,}b{1,}c",
    "(?i)a.+?c",
    "(?i)a.*?c",
    "(?i)a.{0,5}?c",
    "(?i)(a+|b)*",
    "(?i)(a+|b){0,}",
    "(?i)(a+|b)+",
    "(?i)(a+|b){1,}",
    "(?i)(a+|b)?",
    "(?i)(a+|b){0,1}",
    "(?i)(a+|b){0,1}?",
    "(?i)[^ab]*",
    "(?i)abc",
    "(?i)a*",
    "(?i)([abc])*d",
    "(?i)([abc])*bcd",
    "(?i)a|b|c|d|e",
    "(?i)(a|b|c|d|e)f",
    "(?i)abcd*efg",
    "(?i)ab*",
    "(?i)ab*",
    "(?i)(ab|cd)e",
    "(?i)[abhgefdc]ij",
    "(?i)^(ab|cd)e",
    "(?i)(abc|)ef",
    "(?i)(a|b)c*d",
    "(?i)(ab|ab*)bc",
    "(?i)a([bc]*)c*",
    "(?i)a([bc]*)(c*d)",
    "(?i)a([bc]+)(c*d)",
    "(?i)a([bc]*)(c+d)",
    "(?i)a[bcd]*dcdcde",
    "(?i)a[bcd]+dcdcde",
    "(?i)(ab|a)b*c",
    "(?i)((a)(b)c)(d)",
    "(?i)[a-zA-Z_][a-zA-Z0-9_]*",
    "(?i)^a(bc+|b[eh])g|.h$",
    "(?i)(bc+d$|ef*g.|h?i(j|k))",
    "(?i)(bc+d$|ef*g.|h?i(j|k))",
    "(?i)(bc+d$|ef*g.|h?i(j|k))",
    "(?i)(bc+d$|ef*g.|h?i(j|k))",
    "(?i)(bc+d$|ef*g.|h?i(j|k))",
    "(?i)((((((((((a))))))))))",
    "(?i)((((((((((a))))))))))\\10",
    "(?i)(((((((((a)))))))))",
    "(?i)(?:(?:(?:(?:(?:(?:(?:(?:(?:(a))))))))))",
    "(?i)(?:(?:(?:(?:(?:(?:(?:(?:(?:(a|b|c))))))))))",
    "(?i)multiple words of text",
    "(?i)multiple words",
    "(?i)(.*)c(.*)",
    "(?i)\\((.*), (.*)\\)",
    "(?i)[k]",
    "(?i)a[-]?c",
    "(?i)(abc)\\1",
    "(?i)([a-c]*)\\1",
    "a(?!b).",
    "a(?=d).",
    "a(?=c|d).",
    "a(?:b|c|d)(.)",
    "a(?:b|c|d)*(.)",
    "a(?:b|c|d)+?(.)",
    "a(?:b|(c|e){1,2}?|d)+?(.)",
    "^(.+)?B",
    "(?<!-):(.*?)(?<!-):",
    "(?<!\\\\):(.*?)(?<!\\\\):",
    "w(?# comment 1)xy(?# comment 2)z",
    "w(?i)",
    "(?x)w# comment 1\n        x y\n        # comment 2\n        z",
    "^abc",
    "(?m)^abc",
    "(?m)abc$",
    "a.b",
    "(?s)a.b",
    "\\w+",
    "[\\w]+",
    "\\D+",
    "[\\D]+",
    "[\\da-fA-F]+",
    "([\\s]*)([\\S]*)([\\s]*)",
    "(\\s*)(\\S*)(\\s*)",
    "\\xff",
    "\\x00ff",
    "\\t\\n\\v\\r\\f\\a",
    "[\\t][\\n][\\v][\\r][\\f][\\b]",
    "(([a-z]+):)?([a-z]+)$",
    ".*d",
    "[\\41]",
    "(x?)?",
    "(?x)foo ",
    "\\w-]+",
    "[ ]*?\\ (\\d+).*",
    "[ ]*?\\ (\\d+).*",
    ".*?$",
    "[^>]*?b",
    "a*?$",
    "((a)c)?(ab)$",
    "([ab]*?)(?=(b)?)c",
    "([ab]*?)(?!(b))c",
    "([ab]*?)(?<!(a))"
  ]

  test "parse" do
    for c <- @cases do
      IO.inspect(c)
      IO.inspect(Randex.Parser.parse(c))
    end
  end
end
